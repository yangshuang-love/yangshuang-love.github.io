<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Y.S</title>
  
  <subtitle>æœ‰äº›è·¯å¾ˆè¿œï¼Œèµ°ä¸‹å»ä¼šå¾ˆç´¯ã€‚å¯æ˜¯ï¼Œä¸èµ°ï¼Œä¼šåæ‚”ã€‚</subtitle>
  <link href="http://hukayun.com/atom.xml" rel="self"/>
  
  <link href="http://hukayun.com/"/>
  <updated>2020-10-26T06:35:45.335Z</updated>
  <id>http://hukayun.com/</id>
  
  <author>
    <name>Y S</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>apollo ä½¿ç”¨ VUE ç¤ºä¾‹</title>
    <link href="http://hukayun.com/2020/01/13/apollo/"/>
    <id>http://hukayun.com/2020/01/13/apollo/</id>
    <published>2020-01-13T00:00:00.000Z</published>
    <updated>2020-10-26T06:35:45.335Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>Apollo æ˜¯ GraphQL çš„ä¸€ç§å®ç°ï¼Œè§£å†³ RESTful API çš„ä¸€äº›é—®é¢˜ã€‚</p><p>å®˜ç½‘æ•™ç¨‹ï¼š<a href="https://www.apollographql.com/docs/tutorial/introduction/">https://www.apollographql.com/docs/tutorial/introduction/</a></p><p>å‰ç«¯åº“ï¼š<br><code>npm install --save vue-apollo apollo-client</code></p><p>æˆ‘ä»¬æŒ‰ç…§å®˜ç½‘ç¤ºä¾‹åšä¸€éæ•™ç¨‹ï¼Œæ„å»ºä¸€ä¸ªé¢„è®¢ SpaceX å‘å°„çš„å°åº”ç”¨ã€‚ä¸»è¦åŒ…æ‹¬ï¼š</p><ul><li>ç™»å½•é¡µ</li><li>å³å°†å‘å°„æ¸…å•</li><li>å‘å°„ç»†èŠ‚</li><li>ç”¨æˆ·èµ„æ–™é¡µ</li><li>è´­ç‰©è½¦</li></ul><p>å…¶ä»–å‚è€ƒé“¾æ¥<br><a href="https://dev.to/alvarojsnish/graphql-mongodb-the-easy-way-ngc">https://dev.to/alvarojsnish/graphql-mongodb-the-easy-way-ngc</a></p><p><a href="https://stackoverflow.com/questions/52382639/connect-apollo-server-with-mongodb-mongoos/52462031">https://stackoverflow.com/questions/52382639/connect-apollo-server-with-mongodb-mongoos/52462031</a></p><h2 id="æœåŠ¡å™¨ç«¯èµ·æ­¥"><a href="#æœåŠ¡å™¨ç«¯èµ·æ­¥" class="headerlink" title="æœåŠ¡å™¨ç«¯èµ·æ­¥"></a>æœåŠ¡å™¨ç«¯èµ·æ­¥</h2><p>ä¸‹è½½æ•™ç¨‹ä»£ç ï¼š</p><p><code>git clone https://github.com/apollographql/fullstack-tutorial.git</code></p><p>èµ·æ­¥ä½¿ç”¨ start ç›®å½•ï¼Œå®Œæˆæ•™ç¨‹çš„ä»£ç å‚è€ƒ final ç›®å½•ã€‚</p><p>å…ˆç¼–è¾‘ server ç›®å½•ï¼Œä¹Ÿå°±æ˜¯æœåŠ¡å™¨ã€‚</p><p>æ–°å»ºæ¨¡å¼ä¹‹å‰ï¼Œå…ˆè®¾ç½® API æœåŠ¡å™¨ã€‚Apollo æœåŠ¡å™¨æ˜¯ä¸€ä¸ªè¿æ¥æ•°æ®çš„åº“ã€‚å…ˆå®‰è£…ä¾èµ–ï¼š</p><p><code>cd start/server &amp;&amp; npm install</code></p><p>å…¶ä¸­æ ¸å¿ƒçš„ä¾èµ–æ˜¯ï¼š<code>apollo-server</code> å’Œ <code>graphql</code> è¿™ä¸¤ä¸ªåŒ…ã€‚</p><p>å…ˆä¿®æ”¹å…¥å£ <code>src/index.js</code> æ–‡ä»¶ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; ApolloServer &#125; = <span class="built_in">require</span>(<span class="string">&quot;apollo-server&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> typeDefs = <span class="built_in">require</span>(<span class="string">&quot;./schema&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> server = <span class="keyword">new</span> ApolloServer(&#123; typeDefs &#125;);</span><br></pre></td></tr></table></figure><p>è¿™é‡Œå¯¼å…¥äº† ApolloServer ç±»ï¼Œå¹¶ç”¨ç¼–å†™çš„æ¨¡å¼æ–°å»ºæœåŠ¡å™¨å®ä¾‹ã€‚ä¸‹é¢æˆ‘ä»¬ç¼–å†™æ¨¡å¼ã€‚</p><h3 id="æ–°å»ºæ¨¡å¼"><a href="#æ–°å»ºæ¨¡å¼" class="headerlink" title="æ–°å»ºæ¨¡å¼"></a>æ–°å»ºæ¨¡å¼</h3><p>å¯ä»¥æŠŠæ¨¡å¼ï¼ˆschemaï¼‰å½“åšæ‰€æœ‰æ•°æ®åŠå…³ç³»çš„è“å›¾ã€‚æ¨¡å¼è¿˜å®šä¹‰äº†æˆ‘ä»¬å¯ä»¥é€šè¿‡æŸ¥è¯¢è·å–å“ªäº›æ•°æ®ä»¥åŠæ›´æ–°å“ªäº›æ•°æ®ã€‚æ¨¡å¼æ˜¯å¼ºç±»å‹çš„ã€‚</p><p>å®˜æ–¹æ–‡æ¡£è®¤ä¸ºæ˜¯æ¨¡å¼æ˜¯å‰ç«¯å’Œåç«¯å›¢é˜Ÿè¿›è¡Œåä½œçš„ç†æƒ³ç»“åˆç‚¹ï¼Œå»ºè®®å›¢é˜Ÿç»ƒä¹  Schema First Developmentã€‚</p><p>å‚ç…§æˆ‘ä»¬çš„ç›®æ ‡ï¼Œåº”ç”¨éœ€è¦ï¼š</p><ul><li>è·å–æ‰€æœ‰å³å°†åˆ°æ¥çš„ç«ç®­å‘å°„</li><li>é€šè¿‡å…¶ ID è·å–ç‰¹å®šçš„å‘å°„</li><li>ç™»å½•ç”¨æˆ·</li><li>é¢„è®¢å‘å°„ï¼ˆç™»å½•çŠ¶æ€ä¸‹ï¼‰</li><li>å–æ¶ˆå‘å°„ï¼ˆç™»å½•çŠ¶æ€ä¸‹ï¼‰</li></ul><p>åŸºäºè¿™äº›è¦æ±‚å»æ„å»ºæ¨¡å¼ã€‚ä¿®æ”¹ <code>src/schema.js</code>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; gql &#125; = <span class="built_in">require</span>(<span class="string">&quot;apollo-server&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> typeDefs = gql<span class="string">`</span></span><br><span class="line"><span class="string">  # Your schema will go here</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = typeDefs;</span><br></pre></td></tr></table></figure><p>å¯¼å…¥ gqlã€‚å¹¶ç”¨ç¤ºä¾‹çš„æ–¹å¼å†™å…¥æ¨¡å¼ä»£ç ã€‚</p><p>è¯­è¨€ä½¿ç”¨çš„æ˜¯ SDL è¯­è¨€ï¼ˆGraphQLâ€™s schema definition languageï¼‰ã€‚çœ‹ç€æœ‰ä¸€ç‚¹åƒ <code>TypeScript</code>ã€‚</p><p>ä»æŸ¥è¯¢ç±»å‹ (Query type) å¼€å§‹ï¼ŒæŸ¥è¯¢ç±»å‹ä¸»è¦æ˜¯ç”¨æ¥æè¿°æˆ‘ä»¬çš„æ•°æ®ï¼Œæ˜¯æ¨¡å¼çš„å…¥å£ç‚¹ã€‚ç°åœ¨æˆ‘ä»¬åŠ å…¥ä¸€äº›ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; gql &#125; = <span class="built_in">require</span>(<span class="string">&quot;apollo-server&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> typeDefs = gql(<span class="string">`</span></span><br><span class="line"><span class="string">  type Query &#123;</span></span><br><span class="line"><span class="string">    launches: [Launch]!</span></span><br><span class="line"><span class="string">    launch(id: ID!): Launch</span></span><br><span class="line"><span class="string">    # Queries for the current user</span></span><br><span class="line"><span class="string">    me: User</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = typeDefs;</span><br></pre></td></tr></table></figure><p>å®šä¹‰äº†éç©ºæ•°ç»„ launchesï¼Œå®šä¹‰äº†é€šè¿‡ id æŸ¥è¯¢å•ä¸ª launchï¼Œè¿˜å®šä¹‰äº† me è·å–ç”¨æˆ·ä¿¡æ¯ã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ Launch å’Œ User ä¸¤ä¸ªå¯¹è±¡ç±»å‹ã€‚æˆ‘ä»¬ä¸‹é¢æ¥å®šä¹‰ä¸€ä¸‹ä»–ä»¬ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">type Launch &#123;</span><br><span class="line">  id: ID!</span><br><span class="line">  site: <span class="built_in">String</span></span><br><span class="line">  mission: Mission</span><br><span class="line">  rocket: Rocket</span><br><span class="line">  isBooked: <span class="built_in">Boolean</span>!</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Rocket &#123;</span><br><span class="line">  id: ID!</span><br><span class="line">  name: <span class="built_in">String</span></span><br><span class="line">  type: <span class="built_in">String</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type User &#123;</span><br><span class="line">  id: ID!</span><br><span class="line">  email: <span class="built_in">String</span>!</span><br><span class="line">  trips: [Launch]!</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Mission &#123;</span><br><span class="line">  name: <span class="built_in">String</span></span><br><span class="line">  missionPatch(size: PatchSize): <span class="built_in">String</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">enum PatchSize &#123;</span><br><span class="line">  SMALL</span><br><span class="line">  LARGE</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¡®å®å¾ˆåƒ TSï¼Œæœ‰å¾ˆå¤šåŸºç¡€ç±»å‹å¦‚ ID, String, Boolean, Int ç­‰ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰ç±»å‹ã€‚</p><p>missionPatch è¿™é‡Œä¹ŸåŠ å…¥äº†å‚æ•°ï¼Œå› ä¸º GraphQL éå¸¸çµæ´»ï¼Œå¯ä»¥åœ¨ä»»ä½•å­—æ®µé‡ŒåŒ…å«å‚æ•°ã€‚è¿˜å¯ä»¥å®šä¹‰æšä¸¾ç±»å‹ã€‚</p><p><a href="https://devhints.io/graphql#schema">è¯¦ç»†ç”¨æ³•å‚è€ƒ</a></p><p>ç„¶åæ˜¯ Mutation type å˜åŠ¨ç±»å‹ã€‚ä¸»è¦æ˜¯ä¿®æ”¹æ•°æ®çš„å…¥å£ç‚¹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">type Mutation &#123;</span><br><span class="line">  # if false, booking trips failed -- check errors</span><br><span class="line">  bookTrips(launchIds: [ID]!): TripUpdateResponse!</span><br><span class="line"></span><br><span class="line">  # if false, cancellation failed -- check errors</span><br><span class="line">  cancelTrip(launchId: ID!): TripUpdateResponse!</span><br><span class="line"></span><br><span class="line">  login(email: String): String # login token</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type TripUpdateResponse &#123;</span><br><span class="line">  success: <span class="built_in">Boolean</span>!</span><br><span class="line">  message: <span class="built_in">String</span></span><br><span class="line">  launches: [Launch]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>bookTrips å’Œ cancelTrip è¿™ä¸¤ä¸ªå˜åŠ¨éƒ½ä¼šæ¥å—ä¸€ä¸ªå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ›´æ–°å“åº” TripUpdateResponseã€‚åœ¨å“åº”é‡Œä¸å…‰åŒ…å«äº†çŠ¶æ€å’Œä¿¡æ¯ï¼Œè¿˜åŒ…æ‹¬äº†æ›´æ–°åçš„æ•°æ®ã€‚è¿™æ˜¯ä¸€ç§å¥½ä¹ æƒ¯ï¼Œå¯ä»¥è®©å®¢æˆ·ç«¯è‡ªåŠ¨ç¼“å­˜æ›´æ–°ã€‚</p><p>ç°åœ¨è®¾ç½®æœåŠ¡å™¨ç›‘å¬ï¼Œä¿®æ”¹ index.jsï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; ApolloServer &#125; = <span class="built_in">require</span>(<span class="string">&quot;apollo-server&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> typeDefs = <span class="built_in">require</span>(<span class="string">&quot;./schema&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> server = <span class="keyword">new</span> ApolloServer(&#123; typeDefs &#125;);</span><br><span class="line"></span><br><span class="line">server.listen().then(<span class="function">(<span class="params">&#123; url &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`ğŸš€ Server ready at <span class="subst">$&#123;url&#125;</span>`</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`GraphQL Playground run at <span class="subst">$&#123;url&#125;</span>graphql`</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>è¿è¡Œ npm startï¼ŒæœåŠ¡å™¨é»˜è®¤ç«¯å£ 4000ã€‚</p><p>é»˜è®¤ Apollo å¼€å‘ç¯å¢ƒä¼šå¼€å¯ <a href="https://www.apollographql.com/docs/apollo-server/testing/graphql-playground/">GraphQL Playground</a>ã€‚è¿™æ˜¯ä¸€ä¸ªäº¤äº’å¼æµè§ˆå™¨ IDEï¼Œå¯ä»¥ç”¨æ¥æµè§ˆå’Œæµ‹è¯•ã€‚ç”Ÿäº§ç¯å¢ƒè‡ªåŠ¨å…³é—­ã€‚</p><p>ç‚¹å‡»å³ä¾§çš„ schema æŒ‰é’®å’Œ docs æŒ‰é’®ï¼Œå¯ä»¥ç›´æ¥æµè§ˆè‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£å’Œæ¨¡å¼ä»£ç ã€‚</p><h3 id="è¿æ¥æ•°æ®"><a href="#è¿æ¥æ•°æ®" class="headerlink" title="è¿æ¥æ•°æ®"></a>è¿æ¥æ•°æ®</h3><p>ç°åœ¨æˆ‘ä»¬å¯ä»¥é€šè¿‡å»ºç«‹çš„æ¨¡å¼æ¥è¿æ¥æ•°æ®æºäº†ã€‚æˆ‘ä»¬çš„æ•°æ®æºå¯ä»¥æ˜¯ä»»æ„æœåŠ¡ï¼Œæ¯”å¦‚ä¸šåŠ¡é€»è¾‘ï¼ŒREST APIs, æ•°æ®åº“, æˆ–è€… gRPC æœåŠ¡ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬ä¼šè¯•è¯•è¿æ¥ REST API å’Œ SQL æ•°æ®åº“ã€‚æ–°å»º<code>src/datasources/launch.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; RESTDataSource &#125; = <span class="built_in">require</span>(<span class="string">&quot;apollo-datasource-rest&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LaunchAPI</span> <span class="keyword">extends</span> <span class="title">RESTDataSource</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>();</span><br><span class="line">    <span class="built_in">this</span>.baseURL = <span class="string">&quot;https://api.spacexdata.com/v2/&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = LaunchAPI;</span><br></pre></td></tr></table></figure><p>è®¾å®šäº† api åŸºæœ¬åœ°å€ã€‚RESTDataSource è¿˜è®¾ç½®äº†å†…å­˜ç¼“å­˜ï¼Œæ— éœ€é¢å¤–è®¾ç½®å³å¯ç¼“å­˜æ¥è‡ª REST èµ„æºçš„å“åº”ã€‚æˆ‘ä»¬ç§°æ­¤ä¸ºéƒ¨åˆ†æŸ¥è¯¢ç¼“å­˜ã€‚æ­¤ç¼“å­˜çš„ä¼˜ç‚¹åœ¨äºï¼Œæ‚¨å¯ä»¥é‡ç”¨ REST API å…¬å¼€çš„ç°æœ‰ç¼“å­˜é€»è¾‘ã€‚</p><p>ç„¶åå†™æ•°æ®æ‹‰å–æ–¹æ³•ï¼Œé¦–å…ˆæ·»åŠ ä¸€ä¸ªè·å–æ‰€æœ‰å‘å°„ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">getAllLaunches</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="built_in">this</span>.get(<span class="string">&#x27;launches&#x27;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Array</span>.isArray(response)</span><br><span class="line">    ? response.map(<span class="function"><span class="params">launch</span> =&gt;</span> <span class="built_in">this</span>.launchReducer(launch))</span><br><span class="line">    : [];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>get è¿™å¥ä»£ç å°±æ˜¯å‘é€äº† get è¯·æ±‚åˆ°<a href="https://api.spacexdata.com/v2/launches%E3%80%82%E8%8E%B7%E5%8F%96%E7%9A%84%E6%95%B0%E6%8D%AE%E6%95%B0%E7%BB%84%E5%8F%88%E7%BB%8F%E8%BF%87%E4%BA%86%E4%B8%80%E4%B8%AAmap%E9%81%8D%E5%8E%86%E6%96%B9%E6%B3%95%EF%BC%8C%E4%B9%9F%E5%B0%B1%E6%98%AF%E5%AF%B9%E6%AF%8F%E4%B8%AA%E6%95%B0%E6%8D%AE%E8%BF%9B%E8%A1%8C%E4%BA%86%E6%93%8D%E4%BD%9C%EF%BC%8C%E6%88%91%E4%BB%AC%E6%8E%A5%E7%9D%80%E5%86%99%E8%BF%99%E4%B8%AA%E6%96%B9%E6%B3%95%E7%9A%84%E5%AE%9E%E7%8E%B0%EF%BC%9A">https://api.spacexdata.com/v2/launchesã€‚è·å–çš„æ•°æ®æ•°ç»„åˆç»è¿‡äº†ä¸€ä¸ªmapéå†æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯å¯¹æ¯ä¸ªæ•°æ®è¿›è¡Œäº†æ“ä½œï¼Œæˆ‘ä»¬æ¥ç€å†™è¿™ä¸ªæ–¹æ³•çš„å®ç°ï¼š</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">launchReducer</span>(<span class="params">launch</span>)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    id: launch.flight_number || <span class="number">0</span>,</span><br><span class="line">    cursor: <span class="string">`<span class="subst">$&#123;launch.launch_date_unix&#125;</span>`</span>,</span><br><span class="line">    site: launch.launch_site &amp;&amp; launch.launch_site.site_name,</span><br><span class="line">    mission: &#123;</span><br><span class="line">      name: launch.mission_name,</span><br><span class="line">      missionPatchSmall: launch.links.mission_patch_small,</span><br><span class="line">      missionPatchLarge: launch.links.mission_patch,</span><br><span class="line">    &#125;,</span><br><span class="line">    rocket: &#123;</span><br><span class="line">      id: launch.rocket.rocket_id,</span><br><span class="line">      name: launch.rocket.rocket_name,</span><br><span class="line">      type: launch.rocket.rocket_type,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ–¹æ³•ç±»ä¼¼ä¸€ä¸ªé‡æ˜ å°„ï¼Œå°† api é‡Œçš„å­—æ®µæ˜ å°„åˆ°äº†æˆ‘ä»¬å®šä¹‰çš„ schema ä¸­çš„å­—æ®µï¼ŒåŒæ—¶è¿˜åšäº†æ•°æ®çš„ç²¾ç®€å’Œç»„ç»‡ã€‚</p><p>ç„¶åå†å¢åŠ ä¸¤ä¸ªé€šè¿‡ id æˆ– id åˆ—è¡¨æ¥è·å–ç‰¹å®šå‘å°„æ•°æ®çš„æ–¹æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">getLaunchById</span>(<span class="params">&#123; launchId &#125;</span>)</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="built_in">this</span>.get(<span class="string">&#x27;launches&#x27;</span>, &#123; <span class="attr">flight_number</span>: launchId &#125;);</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">this</span>.launchReducer(response[<span class="number">0</span>]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">getLaunchesByIds</span>(<span class="params">&#123; launchIds &#125;</span>)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.all(</span><br><span class="line">    launchIds.map(<span class="function"><span class="params">launchId</span> =&gt;</span> <span class="built_in">this</span>.getLaunchById(&#123; launchId &#125;)),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡ id è·å–æ•°æ®ï¼Œå¦‚æœæ˜¯æ•°ç»„ï¼Œåˆ™åˆ†åˆ«è°ƒç”¨å•ä¸ª id è·å–çš„æ–¹æ³•ã€‚ç°åœ¨ rest æ–¹å¼å·²ç»æˆåŠŸå•¦ã€‚</p><p>user.js åœ¨ç¤ºä¾‹ä¸­å·²ç»æä¾›äº†ï¼Œå¯ä»¥å…ˆè¯»ä¸€ä¸‹ã€‚æ•°æ®ç»“æ„å·²ç»å‡†å¤‡å¥½äº†ã€‚</p><p>ç„¶åå¼€å§‹æ·»åŠ åˆ° serverï¼Œä¿®æ”¹ index.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; ApolloServer &#125; = <span class="built_in">require</span>(<span class="string">&quot;apollo-server&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> typeDefs = <span class="built_in">require</span>(<span class="string">&quot;./schema&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; createStore &#125; = <span class="built_in">require</span>(<span class="string">&quot;./utils&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> LaunchAPI = <span class="built_in">require</span>(<span class="string">&quot;./datasources/launch&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> UserAPI = <span class="built_in">require</span>(<span class="string">&quot;./datasources/user&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = createStore();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> server = <span class="keyword">new</span> ApolloServer(&#123;</span><br><span class="line">  typeDefs,</span><br><span class="line">  dataSources: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">    launchAPI: <span class="keyword">new</span> LaunchAPI(),</span><br><span class="line">    userAPI: <span class="keyword">new</span> UserAPI(&#123; store &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">server.listen().then(<span class="function">(<span class="params">&#123; url &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`ğŸš€ Server ready at <span class="subst">$&#123;url&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;ç®€ä»‹&quot;&gt;&lt;a href=&quot;#ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;ç®€ä»‹&quot;&gt;&lt;/a&gt;ç®€ä»‹&lt;/h2&gt;&lt;p&gt;Apollo æ˜¯ GraphQL çš„ä¸€ç§å®ç°ï¼Œè§£å†³ RESTful API çš„ä¸€äº›é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;å®˜ç½‘æ•™ç¨‹ï¼š&lt;a href=&quot;http</summary>
      
    
    
    
    <category term="æŠ€æœ¯" scheme="http://hukayun.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="Node.js" scheme="http://hukayun.com/tags/Node-js/"/>
    
    <category term="Vue.js" scheme="http://hukayun.com/tags/Vue-js/"/>
    
  </entry>
  
  <entry>
    <title>base64ä¸arrayBufferäº’ç›¸è½¬æ¢</title>
    <link href="http://hukayun.com/2019/07/18/base64%E4%B8%8EarrayBuffer%E4%BA%92%E7%9B%B8%E8%BD%AC%E6%8D%A2/"/>
    <id>http://hukayun.com/2019/07/18/base64%E4%B8%8EarrayBuffer%E4%BA%92%E7%9B%B8%E8%BD%AC%E6%8D%A2/</id>
    <published>2019-07-18T00:00:00.000Z</published>
    <updated>2020-10-26T06:35:45.335Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">function arrayBufferToBase64(buffer)&#123;</span><br><span class="line">    var binary &#x3D; &quot;&quot;;</span><br><span class="line">    var bytes &#x3D; new Unit8Array(buffer);</span><br><span class="line">    var len &#x3D; bytes.byteLength;</span><br><span class="line">    for(var i &#x3D; 0;i&lt;len;i++)&#123;</span><br><span class="line">        binary +&#x3D; String.fromCharCode(bytes[i]);</span><br><span class="line">    &#125;</span><br><span class="line">return window.btoa(binary);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">function _base64ToArrayBuffer(base64) &#123;</span><br><span class="line">    var binary_string &#x3D;  window.atob(base64.split(&quot;,&quot;)[1]);</span><br><span class="line">    var len &#x3D; binary_string.length;</span><br><span class="line">    var bytes &#x3D; new Uint8Array( len );</span><br><span class="line">    for (var i &#x3D; 0; i &lt; len; i++)        &#123;</span><br><span class="line">    bytes[i] &#x3D; binary_string.charCodeAt(i);</span><br><span class="line">    &#125;</span><br><span class="line">    return bytes.buffer;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class</summary>
      
    
    
    
    <category term="ä»£ç " scheme="http://hukayun.com/categories/%E4%BB%A3%E7%A0%81/"/>
    
    
    <category term="JavaScript" scheme="http://hukayun.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>ReactNativeç¯å¢ƒæ­å»º</title>
    <link href="http://hukayun.com/2019/04/15/ReactNative%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    <id>http://hukayun.com/2019/04/15/ReactNative%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/</id>
    <published>2019-04-15T00:00:00.000Z</published>
    <updated>2020-10-26T06:35:45.335Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸€ã€-ç¯å¢ƒ"><a href="#ä¸€ã€-ç¯å¢ƒ" class="headerlink" title="ä¸€ã€ ç¯å¢ƒ"></a>ä¸€ã€ ç¯å¢ƒ</h2><ol><li><p>nodeç¯å¢ƒ</p></li><li><p>android sdk</p></li><li><p>react-native-cli</p></li><li><p>Genymotionæ¨¡æ‹Ÿå™¨ï¼ˆæš‚æ—¶ä½¿ç”¨çš„æ˜¯30å¤©ä¸ªäººè¯•ç”¨ç‰ˆï¼Œä¾èµ–VirtualBoxï¼‰</p></li></ol><h2 id="äºŒã€å¯åŠ¨"><a href="#äºŒã€å¯åŠ¨" class="headerlink" title="äºŒã€å¯åŠ¨"></a>äºŒã€å¯åŠ¨</h2><ol><li>å¯åŠ¨React Native Serverï¼š </li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">react-native start</span><br></pre></td></tr></table></figure><ol start="2"><li><p>æ‰“å¼€VirtualBoxï¼Œæ‰“å¼€Genymotionæ¨¡æ‹Ÿå™¨</p></li><li><p>å¦å¼€ä¸€ä¸ªcmd:</p></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd android</span><br><span class="line"></span><br><span class="line">gradlew.bat installDebug</span><br></pre></td></tr></table></figure><ol start="3"><li><p>android\app\build\outputs\apké‡Œé¢çš„apkæ–‡ä»¶æ‹–åˆ°Genymotionä¸­å®‰è£…æ‰§è¡Œï¼š</p></li><li><p>æµè§ˆå™¨æ‰“å¼€ä¸‹é¢é“¾æ¥ï¼š</p></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;localhost:8081&#x2F;index.android.bundle?platform&#x3D;android</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;ä¸€ã€-ç¯å¢ƒ&quot;&gt;&lt;a href=&quot;#ä¸€ã€-ç¯å¢ƒ&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€ ç¯å¢ƒ&quot;&gt;&lt;/a&gt;ä¸€ã€ ç¯å¢ƒ&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;nodeç¯å¢ƒ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;android sdk&lt;/p&gt;
&lt;/li&gt;
&lt;li</summary>
      
    
    
    
    <category term="å¼€å‘ç¯å¢ƒ" scheme="http://hukayun.com/categories/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/"/>
    
    
    <category term="windows" scheme="http://hukayun.com/tags/windows/"/>
    
    <category term="react" scheme="http://hukayun.com/tags/react/"/>
    
  </entry>
  
  <entry>
    <title>è§£æ”¾F5--å‰ç«¯é¡µé¢å®æ—¶åˆ·æ–°</title>
    <link href="http://hukayun.com/2019/01/12/%E8%A7%A3%E6%94%BEF5--%E5%89%8D%E7%AB%AF%E9%A1%B5%E9%9D%A2%E5%AE%9E%E6%97%B6%E5%88%B7%E6%96%B0/"/>
    <id>http://hukayun.com/2019/01/12/%E8%A7%A3%E6%94%BEF5--%E5%89%8D%E7%AB%AF%E9%A1%B5%E9%9D%A2%E5%AE%9E%E6%97%B6%E5%88%B7%E6%96%B0/</id>
    <published>2019-01-12T00:00:00.000Z</published>
    <updated>2020-10-26T06:35:45.335Z</updated>
    
    <content type="html"><![CDATA[<p>##ã€€è§£æ”¾F5â€“å‰ç«¯é¡µé¢å®æ—¶åˆ·æ–°</p><hr><p>æœ€è¿‘åœ¨ç ”ç©¶å‰ç«¯è‡ªåŠ¨åŒ–å·¥å…·æ—¶ä¸€ç›´åœ¨å¯»æ‰¾ä¸€ç§æ–¹æ³•æˆ–è€…å·¥å…·èƒ½å¤Ÿæ»¡è¶³åŒæ—¶ç›‘å¬å¤šä¸ªé¡µé¢ä»£ç ä¿®æ”¹å¹¶åˆ·æ–°çš„æ–¹æ³•,ä¹‹å‰æ‰‹é‡Œæœ‰ä¸ªgulpé¡¹ç›®å¯ä»¥åœ¨æœ¬åœ°èµ·æœåŠ¡å¹¶å¯¹ä»£ç è¿›è¡Œç›‘å¬ï¼Œä½†æ˜¯åªé€‚ç”¨äºå•é¡µé¢ï¼Œç„¶åè¿‘æ®µæ—¶é—´ç¿»çœ‹äº†å‡ ä¸ªç”¨gulp+webpackæ„å»ºçš„å¤šé¡µé¢é¡¹ç›®æºç ï¼Œå‘ç°è·Ÿä¸ªäººçš„éœ€æ±‚æ€»æœ‰ä¸ä¸€è‡´çš„åœ°æ–¹ï¼Œå¦å¤–åœ¨å‘¨äº”ä¹Ÿå°±æ˜¯03.10å¶ç„¶å‘ç°<a href="https://segmentfault.com/q/1010000008657801">gulpä»£ç†ä¼šå¯¼è‡´æœåŠ¡ç«¯æ¥æ”¶ä¸åˆ°æ•°æ®</a>ï¼Œç›®å‰æ­£åœ¨ç ”ç©¶è§£å†³åŠæ³•ã€‚</p><h2 id="æ­£é¢˜ï¼š"><a href="#æ­£é¢˜ï¼š" class="headerlink" title="æ­£é¢˜ï¼š"></a>æ­£é¢˜ï¼š</h2><p>å®æ—¶åˆ·æ–°æ–¹æ³•æˆ‘ç›®å‰ç”¨è¿‡çš„æœ‰ä¸‰ç§ï¼Œå‰ä¸¤ç§å°±æ˜¯gulpå’Œwebpackï¼Œéƒ½èƒ½å¯åŠ¨æœåŠ¡å¹¶è¿›è¡Œç›‘å¬ï¼Œç½‘ä¸Šèµ„æ–™å¾ˆå¤šï¼Œå°±ä¸ç»†è¯´äº†ï¼Œç¬¬ä¸‰ç§æ˜¯æœ¬æ–‡çš„é‡ç‚¹ä¹Ÿæ˜¯å¯¹ä¹‹å‰æåˆ°çš„éœ€æ±‚çš„é™çº§è§£å†³åŠæ³•<a href="http://www.browsersync.cn/">Browsersync</a>ï¼Œæš‚æ—¶å®ç°äº†é™æ€é¡µé¢ç›´æ¥å¯åŠ¨æœåŠ¡ç›‘å¬æ–‡ä»¶ä¿®æ”¹ï¼Œå¦å¤–åœ¨æˆ‘æœ¬åœ°æœ‰ä¸ªnginxæœåŠ¡ï¼Œä½¿ç”¨<a href="http://www.browsersync.cn/">Browsersync</a>èƒ½å¤Ÿå®ç°nginxæœåŠ¡ç«¯å£ä»£ç†ç›‘å¬</p><p>å…·ä½“å…³äºBrowsersyncå¯ä»¥æŸ¥çœ‹<a href="http://www.browsersync.cn/">Browsersyncä¸­æ–‡å®˜ç½‘</a>;</p><ol><li><p>å…ˆå®‰è£…nodeJSå¹¶æ·»åŠ åˆ°ç¯å¢ƒå˜é‡</p></li><li><p>å…¨å±€å®‰è£…browser-sync</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g browser-sync</span><br></pre></td></tr></table></figure></li></ol><p>é™æ€é¡µé¢æ–¹æ³•ï¼š</p><ol><li>cd é¡¹ç›®ç›®å½•</li><li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">browser-sync start --server --files &quot;**&#x2F;*.css,**&#x2F;*.html,**&#x2F;*.js&quot;</span><br></pre></td></tr></table></figure></li></ol><p>åŠ¨æ€é¡µé¢(phpã€nginxç­‰)æ–¹æ³•ï¼š</p><ol><li>cd é¡¹ç›®ç›®å½•</li><li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">browser-sync start --proxy &quot;æœ¬æœºip&#x2F;nginxé…ç½®è·¯ç”±&#x2F;&quot; --files &quot;**&#x2F;*.css,**&#x2F;*.html,**&#x2F;*.js&quot;</span><br></pre></td></tr></table></figure></li></ol><p>å¤‡å¿˜æ³¨æ„äº‹é¡¹ï¼š<br>    å½“å‰æ–¹æ³•å¹¶éæœ€ç»ˆè§£å†³æ–¹æ¡ˆï¼Œç›®å‰ä»…æ˜¯ä½¿ç”¨äº†é¡µé¢å®æ—¶ç›‘å¬ï¼Œå¤šé¡µé¢è‡ªåŠ¨åŒ–ä»éœ€è¦å¯»æ‰¾è§£å†³æ–¹æ¡ˆï¼Œå¦å¤–å…³äºåŠ¨æ€é¡µé¢ä½¿ç”¨browser-syncæ—¶proxyä¸€å®šè¦ä»£ç†æœ¬æœºipè€Œä¸æ˜¯localhostï¼Œè¿™æ˜¯ä¸€ä¸ªå‘ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;##ã€€è§£æ”¾F5â€“å‰ç«¯é¡µé¢å®æ—¶åˆ·æ–°&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;æœ€è¿‘åœ¨ç ”ç©¶å‰ç«¯è‡ªåŠ¨åŒ–å·¥å…·æ—¶ä¸€ç›´åœ¨å¯»æ‰¾ä¸€ç§æ–¹æ³•æˆ–è€…å·¥å…·èƒ½å¤Ÿæ»¡è¶³åŒæ—¶ç›‘å¬å¤šä¸ªé¡µé¢ä»£ç ä¿®æ”¹å¹¶åˆ·æ–°çš„æ–¹æ³•,ä¹‹å‰æ‰‹é‡Œæœ‰ä¸ªgulpé¡¹ç›®å¯ä»¥åœ¨æœ¬åœ°èµ·æœåŠ¡å¹¶å¯¹ä»£ç è¿›è¡Œç›‘å¬ï¼Œä½†æ˜¯åªé€‚ç”¨äºå•é¡µé¢ï¼Œç„¶åè¿‘æ®µæ—¶é—´ç¿»çœ‹äº†å‡ ä¸ªç”¨gulp+web</summary>
      
    
    
    
    <category term="å¼€å‘ç¯å¢ƒ" scheme="http://hukayun.com/categories/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/"/>
    
    
    <category term="windows" scheme="http://hukayun.com/tags/windows/"/>
    
    <category term="è°ƒè¯•" scheme="http://hukayun.com/tags/%E8%B0%83%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>JSæµ®ç‚¹æ•°ä¸¢å¤±ç²¾åº¦è§£å†³åŠæ³•ä»¥åŠtofixdå››èˆäº”å…¥</title>
    <link href="http://hukayun.com/2018/12/16/JS%E6%B5%AE%E7%82%B9%E6%95%B0%E4%B8%A2%E5%A4%B1%E7%B2%BE%E5%BA%A6%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95%E4%BB%A5%E5%8F%8Atofixd%E5%9B%9B%E8%88%8D%E4%BA%94%E5%85%A5/"/>
    <id>http://hukayun.com/2018/12/16/JS%E6%B5%AE%E7%82%B9%E6%95%B0%E4%B8%A2%E5%A4%B1%E7%B2%BE%E5%BA%A6%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95%E4%BB%A5%E5%8F%8Atofixd%E5%9B%9B%E8%88%8D%E4%BA%94%E5%85%A5/</id>
    <published>2018-12-16T00:00:00.000Z</published>
    <updated>2020-10-26T06:35:45.335Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line"> * floatTool åŒ…å«åŠ å‡ä¹˜é™¤å››ä¸ªæ–¹æ³•ï¼Œèƒ½ç¡®ä¿æµ®ç‚¹æ•°è¿ç®—ä¸ä¸¢å¤±ç²¾åº¦</span><br><span class="line"> *</span><br><span class="line"> * æˆ‘ä»¬çŸ¥é“è®¡ç®—æœºç¼–ç¨‹è¯­è¨€é‡Œæµ®ç‚¹æ•°è®¡ç®—ä¼šå­˜åœ¨ç²¾åº¦ä¸¢å¤±é—®é¢˜ï¼ˆæˆ–ç§°èˆå…¥è¯¯å·®ï¼‰ï¼Œå…¶æ ¹æœ¬åŸå› æ˜¯äºŒè¿›åˆ¶å’Œå®ç°ä½æ•°é™åˆ¶æœ‰äº›æ•°æ— æ³•æœ‰é™è¡¨ç¤º</span><br><span class="line"> * ä»¥ä¸‹æ˜¯åè¿›åˆ¶å°æ•°å¯¹åº”çš„äºŒè¿›åˆ¶è¡¨ç¤º</span><br><span class="line"> *      0.1 &gt;&gt; 0.0001 1001 1001 1001â€¦ï¼ˆ1001æ— é™å¾ªç¯ï¼‰</span><br><span class="line"> *      0.2 &gt;&gt; 0.0011 0011 0011 0011â€¦ï¼ˆ0011æ— é™å¾ªç¯ï¼‰</span><br><span class="line"> * è®¡ç®—æœºé‡Œæ¯ç§æ•°æ®ç±»å‹çš„å­˜å‚¨æ˜¯ä¸€ä¸ªæœ‰é™å®½åº¦ï¼Œæ¯”å¦‚ JavaScript ä½¿ç”¨ 64 ä½å­˜å‚¨æ•°å­—ç±»å‹ï¼Œå› æ­¤è¶…å‡ºçš„ä¼šèˆå»ã€‚èˆå»çš„éƒ¨åˆ†å°±æ˜¯ç²¾åº¦ä¸¢å¤±çš„éƒ¨åˆ†ã€‚</span><br><span class="line"> *</span><br><span class="line"> * ** method **</span><br><span class="line"> *  add &#x2F; subtract &#x2F; multiply &#x2F;divide</span><br><span class="line"> *</span><br><span class="line"> * ** explame **</span><br><span class="line"> *  0.1 + 0.2 &#x3D;&#x3D; 0.30000000000000004 ï¼ˆå¤šäº† 0.00000000000004ï¼‰</span><br><span class="line"> *  0.2 + 0.4 &#x3D;&#x3D; 0.6000000000000001  ï¼ˆå¤šäº† 0.0000000000001ï¼‰</span><br><span class="line"> *  19.9 * 100 &#x3D;&#x3D; 1989.9999999999998 ï¼ˆå°‘äº† 0.0000000000002ï¼‰</span><br><span class="line"> *</span><br><span class="line"> * floatObj.add(0.1, 0.2) &gt;&gt; 0.3</span><br><span class="line"> * floatObj.multiply(19.9, 100) &gt;&gt; 1990</span><br><span class="line"> *</span><br><span class="line"> *&#x2F;</span><br><span class="line">var floatTool &#x3D; function() &#123;</span><br><span class="line">    </span><br><span class="line">    &#x2F;*</span><br><span class="line">     * åˆ¤æ–­objæ˜¯å¦ä¸ºä¸€ä¸ªæ•´æ•°</span><br><span class="line">     *&#x2F;</span><br><span class="line">    function isInteger(obj) &#123;</span><br><span class="line">        return Math.floor(obj) &#x3D;&#x3D;&#x3D; obj</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    &#x2F;*</span><br><span class="line">     * å°†ä¸€ä¸ªæµ®ç‚¹æ•°è½¬æˆæ•´æ•°ï¼Œè¿”å›æ•´æ•°å’Œå€æ•°ã€‚å¦‚ 3.14 &gt;&gt; 314ï¼Œå€æ•°æ˜¯ 100</span><br><span class="line">     * @param floatNum &#123;number&#125; å°æ•°</span><br><span class="line">     * @return &#123;object&#125;</span><br><span class="line">     *   &#123;times:100, num: 314&#125;</span><br><span class="line">     *&#x2F;</span><br><span class="line">    function toInteger(floatNum) &#123;</span><br><span class="line">        var ret &#x3D; &#123;times: 1, num: 0&#125;</span><br><span class="line">        if (isInteger(floatNum)) &#123;</span><br><span class="line">            ret.num &#x3D; floatNum</span><br><span class="line">            return ret</span><br><span class="line">        &#125;</span><br><span class="line">        var strfi  &#x3D; floatNum + &#39;&#39;</span><br><span class="line">        var dotPos &#x3D; strfi.indexOf(&#39;.&#39;)</span><br><span class="line">        var len    &#x3D; strfi.substr(dotPos+1).length</span><br><span class="line">        var times  &#x3D; Math.pow(10, len)</span><br><span class="line">        var intNum &#x3D; parseInt(floatNum * times + 0.5, 10)</span><br><span class="line">        ret.times  &#x3D; times</span><br><span class="line">        ret.num    &#x3D; intNum</span><br><span class="line">        return ret</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    &#x2F;*</span><br><span class="line">     * æ ¸å¿ƒæ–¹æ³•ï¼Œå®ç°åŠ å‡ä¹˜é™¤è¿ç®—ï¼Œç¡®ä¿ä¸ä¸¢å¤±ç²¾åº¦</span><br><span class="line">     * æ€è·¯ï¼šæŠŠå°æ•°æ”¾å¤§ä¸ºæ•´æ•°ï¼ˆä¹˜ï¼‰ï¼Œè¿›è¡Œç®—æœ¯è¿ç®—ï¼Œå†ç¼©å°ä¸ºå°æ•°ï¼ˆé™¤ï¼‰</span><br><span class="line">     *</span><br><span class="line">     * @param a &#123;number&#125; è¿ç®—æ•°1</span><br><span class="line">     * @param b &#123;number&#125; è¿ç®—æ•°2</span><br><span class="line">     * @param digits &#123;number&#125; ç²¾åº¦ï¼Œä¿ç•™çš„å°æ•°ç‚¹æ•°ï¼Œæ¯”å¦‚ 2, å³ä¿ç•™ä¸ºä¸¤ä½å°æ•°</span><br><span class="line">     * @param op &#123;string&#125; è¿ç®—ç±»å‹ï¼Œæœ‰åŠ å‡ä¹˜é™¤ï¼ˆadd&#x2F;subtract&#x2F;multiply&#x2F;divideï¼‰</span><br><span class="line">     *</span><br><span class="line">     *&#x2F;</span><br><span class="line">    function operation(a, b, op) &#123;</span><br><span class="line">        var o1 &#x3D; toInteger(a)</span><br><span class="line">        var o2 &#x3D; toInteger(b)</span><br><span class="line">        var n1 &#x3D; o1.num</span><br><span class="line">        var n2 &#x3D; o2.num</span><br><span class="line">        var t1 &#x3D; o1.times</span><br><span class="line">        var t2 &#x3D; o2.times</span><br><span class="line">        var max &#x3D; t1 &gt; t2 ? t1 : t2</span><br><span class="line">        var result &#x3D; null</span><br><span class="line">        switch (op) &#123;</span><br><span class="line">            case &#39;add&#39;:</span><br><span class="line">                if (t1 &#x3D;&#x3D;&#x3D; t2) &#123; &#x2F;&#x2F; ä¸¤ä¸ªå°æ•°ä½æ•°ç›¸åŒ</span><br><span class="line">                    result &#x3D; n1 + n2</span><br><span class="line">                &#125; else if (t1 &gt; t2) &#123; &#x2F;&#x2F; o1 å°æ•°ä½ å¤§äº o2</span><br><span class="line">                    result &#x3D; n1 + n2 * (t1 &#x2F; t2)</span><br><span class="line">                &#125; else &#123; &#x2F;&#x2F; o1 å°æ•°ä½ å°äº o2</span><br><span class="line">                    result &#x3D; n1 * (t2 &#x2F; t1) + n2</span><br><span class="line">                &#125;</span><br><span class="line">                return result &#x2F; max</span><br><span class="line">            case &#39;subtract&#39;:</span><br><span class="line">                if (t1 &#x3D;&#x3D;&#x3D; t2) &#123;</span><br><span class="line">                    result &#x3D; n1 - n2</span><br><span class="line">                &#125; else if (t1 &gt; t2) &#123;</span><br><span class="line">                    result &#x3D; n1 - n2 * (t1 &#x2F; t2)</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    result &#x3D; n1 * (t2 &#x2F; t1) - n2</span><br><span class="line">                &#125;</span><br><span class="line">                return result &#x2F; max</span><br><span class="line">            case &#39;multiply&#39;:</span><br><span class="line">                result &#x3D; (n1 * n2) &#x2F; (t1 * t2)</span><br><span class="line">                return result</span><br><span class="line">            case &#39;divide&#39;:</span><br><span class="line">                return result &#x3D; function() &#123;</span><br><span class="line">                    var r1 &#x3D; n1 &#x2F; n2</span><br><span class="line">                    var r2 &#x3D; t2 &#x2F; t1</span><br><span class="line">                    return operation(r1, r2, &#39;multiply&#39;)</span><br><span class="line">                &#125;()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    &#x2F;&#x2F; åŠ å‡ä¹˜é™¤çš„å››ä¸ªæ¥å£</span><br><span class="line">    function add(a, b) &#123;</span><br><span class="line">        return operation(a, b, &#39;add&#39;)</span><br><span class="line">    &#125;</span><br><span class="line">    function subtract(a, b) &#123;</span><br><span class="line">        return operation(a, b, &#39;subtract&#39;)</span><br><span class="line">    &#125;</span><br><span class="line">    function multiply(a, b) &#123;</span><br><span class="line">        return operation(a, b, &#39;multiply&#39;)</span><br><span class="line">    &#125;</span><br><span class="line">    function divide(a, b) &#123;</span><br><span class="line">        return operation(a, b, &#39;divide&#39;)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    &#x2F;&#x2F; exports</span><br><span class="line">    return &#123;</span><br><span class="line">        add: add,</span><br><span class="line">        subtract: subtract,</span><br><span class="line">        multiply: multiply,</span><br><span class="line">        divide: divide</span><br><span class="line">    &#125;</span><br><span class="line">&#125;();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; toFixed ä¿®å¤</span><br><span class="line">function toFixed(num, len) &#123;</span><br><span class="line">    var times &#x3D; Math.pow(10, len);</span><br><span class="line">    var des &#x3D; num * times + 0.5;</span><br><span class="line">    des &#x3D; parseInt(des, 10) &#x2F; times;</span><br><span class="line">    return des + &#39;&#39;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class</summary>
      
    
    
    
    <category term="ä»£ç " scheme="http://hukayun.com/categories/%E4%BB%A3%E7%A0%81/"/>
    
    
    <category term="JavaScript" scheme="http://hukayun.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>è®¾ç½®chromeæµè§ˆå™¨å…è®¸è·¨åŸŸ</title>
    <link href="http://hukayun.com/2018/09/03/%E8%AE%BE%E7%BD%AEchrome%E6%B5%8F%E8%A7%88%E5%99%A8%E5%85%81%E8%AE%B8%E8%B7%A8%E5%9F%9F/"/>
    <id>http://hukayun.com/2018/09/03/%E8%AE%BE%E7%BD%AEchrome%E6%B5%8F%E8%A7%88%E5%99%A8%E5%85%81%E8%AE%B8%E8%B7%A8%E5%9F%9F/</id>
    <published>2018-09-03T00:00:00.000Z</published>
    <updated>2020-10-26T06:35:45.335Z</updated>
    
    <content type="html"><![CDATA[<p>2020-10-22 æ›´æ–°ï¼ï¼</p><ol><li><p>åœ¨Cç›˜æ–°å»ºæ–‡ä»¶å¤¹MyChromeDevUserData</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\MyChromeDevUserData</span><br></pre></td></tr></table></figure></li><li><p>å¤åˆ¶chromeå¿«æ·æ–¹å¼ï¼Œå¹¶å³é”®-&gt;å±æ€§-&gt;å¿«æ·æ–¹å¼-&gt;ç›®æ ‡ æ·»åŠ â€“disable-web-security â€“user-data-dir=C:\MyChromeDevUserData</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;C:\Program Files (x86)\Google\Chrome\Application\chrome.exe&quot; --disable-web-security --user-data-dir&#x3D;C:\MyChromeDevUserData</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;2020-10-22 æ›´æ–°ï¼ï¼&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;åœ¨Cç›˜æ–°å»ºæ–‡ä»¶å¤¹MyChromeDevUserData&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span </summary>
      
    
    
    
    <category term="å¼€å‘ç¯å¢ƒ" scheme="http://hukayun.com/categories/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/"/>
    
    
    <category term="windows" scheme="http://hukayun.com/tags/windows/"/>
    
    <category term="chrome" scheme="http://hukayun.com/tags/chrome/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://hukayun.com/2018/06/07/hello-world/"/>
    <id>http://hukayun.com/2018/06/07/hello-world/</id>
    <published>2018-06-07T00:00:00.000Z</published>
    <updated>2020-10-26T06:35:45.335Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot;&gt;documentation&lt;/a&gt; for</summary>
      
    
    
    
    
  </entry>
  
</feed>
